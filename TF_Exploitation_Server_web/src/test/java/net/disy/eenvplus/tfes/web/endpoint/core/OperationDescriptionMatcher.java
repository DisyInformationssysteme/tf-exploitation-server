package net.disy.eenvplus.tfes.web.endpoint.core;

import java.util.Collection;

import org.hamcrest.FeatureMatcher;
import org.hamcrest.Matcher;
import org.springframework.web.bind.annotation.RequestMethod;

public class OperationDescriptionMatcher {
  public static Matcher<? super OperationDescription> hasOnlineResource(Matcher<String> expected) {
    return new FeatureMatcher<OperationDescription, String>(
        expected,
        "Online-Resource", "Online-Resource") { //$NON-NLS-1$ //$NON-NLS-2$

      @Override
      protected String featureValueOf(OperationDescription description) {
        return description.getOnlineResource();
      }

    };
  }

  public static Matcher<? super OperationDescription> hasRequestMethod(
      Matcher<RequestMethod> expected) {
    return new FeatureMatcher<OperationDescription, RequestMethod>(
        expected,
        "Request-Method", "Request-Method") { //$NON-NLS-1$ //$NON-NLS-2$

      @Override
      protected RequestMethod featureValueOf(OperationDescription description) {
        return description.getMethod();
      }

    };
  }

  public static Matcher<? super OperationDescription> hasEndpointDescriptions(
      Matcher<Iterable<? extends RestEndpointDescription>> expected) {
    return new FeatureMatcher<OperationDescription, Iterable<? extends RestEndpointDescription>>(
        expected,
        "Description", "Description") { //$NON-NLS-1$ //$NON-NLS-2$

      @Override
      protected Collection<RestEndpointDescription> featureValueOf(OperationDescription description) {
        return description.getEndpointDescriptions();
      }

    };
  }

}
