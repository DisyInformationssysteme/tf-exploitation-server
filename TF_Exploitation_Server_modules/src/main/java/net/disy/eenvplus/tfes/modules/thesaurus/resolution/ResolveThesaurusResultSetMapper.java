//Copyright (c) 2014 by Disy Informationssysteme GmbH
package net.disy.eenvplus.tfes.modules.thesaurus.resolution;

import net.disy.eenvplus.tfes.core.api.response.IResolveThesaurus;

import org.springframework.stereotype.Component;

import com.hp.hpl.jena.query.QuerySolution;
import com.hp.hpl.jena.query.ResultSet;
import com.hp.hpl.jena.rdf.model.Literal;

// NOT_PUBLISHED
@Component
public class ResolveThesaurusResultSetMapper {

  public IResolveThesaurus map(ResultSet result) {
    if (!result.hasNext()) {
      return null;
    }
    final QuerySolution current = result.next();

    return new IResolveThesaurus() {

      @Override
      public String getTitle() {
        Literal literal = current.getLiteral("CI_Citation_title"); //$NON-NLS-1$
        return literal != null ? literal.getString() : null;
      }

      public String getDate() {
        Literal literal = current.getLiteral("CI_Date_date_of_revision"); //$NON-NLS-1$
        return literal != null ? literal.getString() : null;
      }

      @SuppressWarnings("nls")
      public String getCodeList() {
        return "http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode";
      }

      @SuppressWarnings("nls")
      public String getCodeListValue() {
        return "revision";
      }

    };
  }
}
